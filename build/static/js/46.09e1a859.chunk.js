(this["webpackJsonpreact-report-forms"]=this["webpackJsonpreact-report-forms"]||[]).push([[46,53],{61:function(e,t,o){"use strict";o.r(t),t.default={text:"<div style='word-wrap:break-word;'></div>",img:"<div><img src='./assets/images/img.png' style='width:100%;height:100%' draggable='false'/></div>",table:"<div><img src='./assets/images/table.png' style='width:50px;height:50px;margin:0 auto' draggable='false'/></div>",ul:"<div style='min-height:30px'><img src='./assets/images/list.png' style='width:50px;height:50px;margin:0 auto' draggable='false'/></div>",checkbox:"<div class='fxm'><img src='./assets/images/checkbox.png' style='height:100%' draggable='false'/><span type='text' class='loopNode fxm' style='margin-left:5px;flex:1;height:100%'>\u5185\u5bb9</span></div>",devider:"<div class='fxm'><img src='./assets/images/devider.png' style='width:100%;height:100%' draggable='false'/></div>",pages:"<div>\u7b2c <span class='pageNumber'></span>/<span class='totalPages'></span> \u9875</div>",barcode:"<div class='fxmc'><img src='./assets/images/img.png' style='width:40px;height:40px' draggable='false'/></div>",qrcode:"<div><img src='./assets/images/img.png' style='width:100%;height:100%' draggable='false'/></div>"}},64:function(e,t,o){"use strict";o.r(t);var s=o(44),a=o(61),i=o(43),d=o(45),l=function(e,t,o){var s=t.$drag,a=t.$scroll,d=t.$paper,l=i.default.mouse.getCoord(e),r=l.x,f=l.y,n=Object(i.default)(a).getInfo(),g=n.scrollTop,h=n.scrollLeft,c=n.scrollWidth,p=n.scrollHeight,u=n.offsetTop,m=n.offsetLeft,v=n.clientWidth,x=n.clientHeight,y=parseInt(a.style.padding),b=parseInt(d.style.padding),w=y+b,L=Object(i.default)(s).getInfo(),k=L.offsetLeft,C=L.offsetTop,T=L.clientWidth,I=L.height,S=c-h-v,N=p-g-x,$=h<=w&&r>k-h||h>w&&r>m,P=v===c&&r<k+T||v<c&&(S>=b&&r<m+v||S<b&&r<m+v-(b-S)),H=g<=w&&f>C-g||g>w&&f>u,_=x===p&&f<C+I||x<p&&(N>=w&&f<u+x||N<w&&f<u+x-(w-N));return new Promise((function(e){$&&P&&H&&_?o.onDrag&&o.onDrag({$drag:s,dragInfo:L,$scroll:a,scrollInfo:n}):o.onFail&&o.onFail({$drag:s,dragInfo:L,$scroll:a,scrollInfo:n})}))};t.default={init:function(e){var t=this,o=Object(i.default)(e.$drag);this.setHtmlPosition=function(t){var o=i.default.mouse.getCoord(t),a=o.x,r=o.y;e._node&&e._node.style({left:a-d.differ+"px",top:r-d.differ+"px"}),l(t,e,{onDrag:function(t){t.$drag;var o=t.dragInfo,i=(t.$scroll,t.scrollInfo),l=a-(o.offsetLeft-i.scrollLeft)-d.differ,f=r-(o.offsetTop-i.scrollTop)-d.differ;if(s.default.setMark(e,".axesY",l),s.default.setMark(e,".axesX",f),e.prevNode){var n=e.prevNode.getInfo(),g=a-d.differ>=n.offsetLeft&&a<=n.offsetRight,h=r-d.differ>=n.offsetTop&&r<=n.offsetBottom;g&&h?e.prevNode.addClass("drag-add"):e.prevNode.removeClass("drag-add")}},onFail:function(){}})},this.setNewPosition=function(a){var r=e._node;if(r){var f=i.default.mouse.getCoord(a),n=f.x,g=f.y;l(a,e,{onDrag:function(a){var i=a.$drag,l=a.dragInfo,f=(a.$scroll,a.scrollInfo);document.body.removeEventListener("mousemove",t.setHtmlPosition),document.body.removeEventListener("mouseup",t.setNewPosition),r.addClass("drag",!0);var h=n-(l.offsetLeft-f.scrollLeft)-d.differ,c=g-(l.offsetTop-f.scrollTop)-d.differ;h-=h%d.axesSpace,c-=c%d.axesSpace,r.left(h).top(c),r.find(".point-mark").addClass("mark-show");var p=r.attr("type");e.isLayout=!1;if(function(t,o,s){if(o&&o.hasClass("x-layout")){var a=t.top(),r=t.left(),h=o.getInfo(),c=h.offsetTop-l.offsetTop,p=h.offsetLeft-l.offsetLeft,u=o.outerHeight(),m=o.outerWidth();if(a>=c&&a<c+u&&(r>=p&&r<p+m)){if(["header","footer","main"].includes(s))return t.remove(),window.$fn.toast("\u65e0\u6cd5\u653e\u7f6e");t.appendTo(o.el);var v=g-(l.offsetTop-f.scrollTop)-d.differ-c,x=n-(l.offsetLeft-f.scrollLeft)-d.differ-p;v-=v%d.axesSpace,x-=x%d.axesSpace,t.top(v).left(x)}else t.appendTo(i);e.isLayout=!0}}(r,e.prevNode,p),"table"===p)r.style({left:0,width:"100%"});else if("ul"===p)r.style({left:0,width:"100%"});else if("devider"===p)r.style({left:0,width:"100%",height:"10px"}),r.find(".template").html("<div></div>").children(0).cssText("width:100%;height:0; border-top:1px solid #ddd;");else if("checkbox"===p)r.removeStyle("width");else if("barcode"===p)r.style({width:"200px",height:"auto"});else if("qrcode"===p)r.style({width:"80px",height:"80px"});else if("flexbox"===p)r.height(100);else if(["header","footer","main"].includes(p)&&("header"===p?r.style("top",0):"main"===p&&r.style("height","200px"),i.querySelector("."+p))){var u=null;return"header"===p?u="\u9875\u7709":"main"===p?u="\u4e3b\u4f53":"footer"===p&&(u="\u9875\u811a"),r.remove(),window.$fn.toast(u+"\u5df2\u5b58\u5728")}["header","footer","main","flexbox"].includes(p)?r.style({left:0,width:"100%"}).addClass(p).addClass("x-layout").find(".point-mark").removeStyle("background"):r.addClass("drag-elem"),r.parent().children(".point-mark").removeClass("mark-show"),e.isLayout||r.appendTo(i),s.default.setParentBorder(o,r),e.setState({hasNode:!0,node:r.el,_node:r},(function(){e.runNode()}))},onFail:function(){!function(){var e=document.querySelector(".move");e&&document.body.removeChild(e)}(),e._node=null,e.node=null,e.setState({hasNode:null,node:null,_node:null})}})}}},DragStart:function(e,t,o){var d=i.default.mouse.getCoord(e),l=d.x,r=d.y;if(o)if(document.querySelector(".move"));else{t.prevNode=t._node;var f=document.createElement("div"),n=Object(i.default)(f).attr({type:o}).addClass("move").left(l-10).top(r-10).width(50).style({position:"absolute",zIndex:1});if(a.default[o]){n.html(a.default[o]).children(0).addClass("template");var g=f.querySelector(".template");Object(i.default)(g).cssText("width:100%;height:100%;background:#fff;overflow:hidden"),"text"===o?n.width(100).height(20).lineHeight(20):"img"===o?n.height(50):"table"===o||"ul"===o?n.attr("group",1):"devider"===o?(n.width(50).height(10),Object(i.default)(g).removeStyle("background")):"checkbox"===o?n.width(20).height(20).find("img").attr("temp",1):"pages"===o&&n.width(50).height(20).lineHeight(20).style({textAlign:"center",whiteSpace:"nowrap"})}else n.width(100).height(100);s.default.createPointMark(n),t._node=n,t.node=f,document.body.appendChild(f),document.body.addEventListener("mousemove",this.setHtmlPosition),document.body.addEventListener("mouseup",this.setNewPosition)}}}}}]);