(this["webpackJsonpreact-report-forms"]=this["webpackJsonpreact-report-forms"]||[]).push([[12],{379:function(t,e,r){"use strict";r.r(e);var a=r(10),o=r(68),n=r(0),c=r.n(n),i=r(161),l=r.n(i),u=r(55),s=r(67),m=r(50),f=window.$fn;e.default=function(t){var e=t.node,r=c.a.useState({}),n=Object(o.a)(r,2),i=n[0],b=n[1],g=c.a.useRef(),d=c.a.useRef(),h=c.a.useRef(),v=c.a.useRef();c.a.useEffect((function(){if(e){var t=e.querySelector("img"),r=t.getAttribute("text");if(r){var a=t.getAttribute("colorDark")||s.qrcode.colorDark,o=t.getAttribute("colorLight")||s.qrcode.colorLight,n=t.getAttribute("margin")||s.qrcode.margin;g.current.setValue(r),d.current.setValue(a),v.current.setValue(o),h.current.setValue(n),b({text:r,colorDark:a,colorLight:o,margin:n})}}}),[e]);var k=c.a.useCallback((function(t){b(Object(a.a)(Object(a.a)({},i),t))}),[i]),A=c.a.useCallback((function(t,r,o){u.a.getNode(e).then((function(t){var e=t.node;t.$drag,t.$temp;if(!f.isValid(i.text))return f.toast("\u4e8c\u7ef4\u7801\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var r=e.querySelector("img");r.setAttribute("temp",1);var o=r.getAttribute("text");o?(i.colorDark?r.setAttribute("colorDark",i.colorDark):r.removeAttribute("colorDark"),i.colorLight?r.setAttribute("colorLight",i.colorLight):r.removeAttribute("colorLight"),i.margin?r.setAttribute("margin",i.margin):r.removeAttribute("margin")):(r.setAttribute("colorDark",s.qrcode.colorDark),r.setAttribute("colorLight",s.qrcode.colorLight),r.setAttribute("margin",s.qrcode.margin),d.current.setValue(s.qrcode.colorDark),v.current.setValue(s.qrcode.colorLight),h.current.setValue(s.qrcode.margin),b(Object(a.a)(Object(a.a)({},s.qrcode),{},{text:i.text})));var n=o?i:s.qrcode,c=Object(a.a)(Object(a.a)({},n),{},{color:{dark:n.colorDark,light:n.colorLight}});for(var u in c)f.isValid(c[u])&&"colorDark"!==u&&"colorLight"!==u||delete c[u];i.text?r.setAttribute("text",i.text):r.removeAttribute("text"),console.log(c);try{l.a.toDataURL(i.text,c).then((function(t){r.src=t}))}catch(m){f.toast("\u4e8c\u7ef4\u7801\u5185\u5bb9\u4e0d\u5408\u6cd5")}}))}),[e,i]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(m.a.Input,{label:"\u5185\u5bb9",ref:g,name:"text",onChange:k})),c.a.createElement("div",{className:"fx"},c.a.createElement(m.a.Input,{label:"\u524d\u666f\u8272",ref:d,name:"colorDark",onChange:k,isHalf:!0}),c.a.createElement(m.a.Input,{label:"\u80cc\u666f\u8272",ref:v,name:"colorLight",onChange:k,isHalf:!0})),c.a.createElement("div",{className:"fx"},c.a.createElement(m.a.Input,{label:"\u8865\u767d",ref:h,name:"margin",onChange:k,isHalf:!0})),c.a.createElement("div",null,c.a.createElement(m.a.Button,{label:"",text:"\u751f\u6210\u4e8c\u7ef4\u7801",onClick:A})))}},68:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var a=r(89);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],a=!0,o=!1,n=void 0;try{for(var c,i=t[Symbol.iterator]();!(a=(c=i.next()).done)&&(r.push(c.value),!e||r.length!==e);a=!0);}catch(l){o=!0,n=l}finally{try{a||null==i.return||i.return()}finally{if(o)throw n}}return r}}(t,e)||Object(a.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);