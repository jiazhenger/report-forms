(this["webpackJsonpreact-report-forms"]=this["webpackJsonpreact-report-forms"]||[]).push([[3],{197:function(e,t,a){"use strict";a.r(t);var r=a(10),o=a(68),n=a(0),i=a.n(n),l=a(153),u=a.n(l),c=a(55),d=a(67),s=a(50),b=window.$fn;t.default=function(e){var t=e.node,a=i.a.useState({}),n=Object(o.a)(a,2),l=n[0],f=n[1],h=i.a.useRef(),m=i.a.useRef(),g=i.a.useRef(),y=i.a.useRef(),p=i.a.useRef(),v=i.a.useRef();i.a.useEffect((function(){if(t){var e=t.querySelector("img"),a=e.getAttribute("code");if(a){var r=e.getAttribute("lineColor")||d.barcode.lineColor,o=e.getAttribute("codeWidth")||d.barcode.codeWidth,n=e.getAttribute("codeHeight")||d.barcode.codeHeight,i=e.getAttribute("fontSize")||d.barcode.fontSize,l=Boolean(e.getAttribute("displayValue"));l=!!l&&d.barcode.displayValue,h.current.setValue(a),m.current.setValue(r),g.current.setValue(o),y.current.setValue(n),p.current.setValue(l),v.current.setValue(i),f({code:a,lineColor:r,width:o,height:n,displayValue:l})}}}),[t]);var A=i.a.useCallback((function(e){f(Object(r.a)(Object(r.a)({},l),e))}),[l]),V=i.a.useCallback((function(e,a,o){c.a.getNode(t).then((function(e){var t=e.node,a=e.$drag;if(console.log(l.code),!b.isValid(l.code))return b.toast("\u6761\u5f62\u7801\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var o=t.querySelector("img");o.style.width="100%",o.style.height="100%",a.style.height="auto",o.setAttribute("temp",1);var n=o.getAttribute("code");n?(l.lineColor?o.setAttribute("lineColor",l.lineColor):o.removeAttribute("lineColor"),l.width?o.setAttribute("codeWidth",l.width):o.removeAttribute("codeWidth"),l.height?o.setAttribute("codeHeight",l.height):o.removeAttribute("codeHeight"),l.displayValue?o.setAttribute("displayValue",l.displayValue):o.removeAttribute("displayValue"),l.fontSize?o.setAttribute("fontSize",l.fontSize):o.removeAttribute("fontSize")):(o.setAttribute("lineColor",d.barcode.lineColor),o.setAttribute("codeWidth",d.barcode.width),o.setAttribute("codeHeight",d.barcode.height),o.setAttribute("displayValue",d.barcode.displayValue),o.setAttribute("fontSize",d.barcode.fontSize),m.current.setValue(d.barcode.lineColor),g.current.setValue(d.barcode.width),y.current.setValue(d.barcode.height),p.current.setValue(d.barcode.displayValue),v.current.setValue(d.barcode.fontSize),f(Object(r.a)(Object(r.a)({},d.barcode),{},{code:l.code})));var i=n?l:d.barcode,c=Object(r.a)(Object(r.a)({},i),{},{font:"OCR-B"});for(var s in c)b.isValid(c[s])||delete c[s];l.code?o.setAttribute("code",l.code):o.removeAttribute("code");try{u()(o,l.code,c)}catch(h){b.toast("\u6761\u5f62\u7801\u5185\u5bb9\u4e0d\u5408\u6cd5")}}))}),[t,l]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(s.a.Input,{label:"\u5185\u5bb9",ref:h,name:"code",onChange:A})),i.a.createElement("div",{className:"fx"},i.a.createElement(s.a.Input,{label:"\u5bbd\u5ea6",ref:g,name:"width",onChange:A,isHalf:!0}),i.a.createElement(s.a.Input,{label:"\u9ad8\u5ea6",ref:y,name:"height",onChange:A,isHalf:!0})),i.a.createElement("div",{className:"fx"},i.a.createElement(s.a.Input,{label:"\u5b57\u4f53",ref:v,name:"fontSize",onChange:A,isHalf:!0}),i.a.createElement(s.a.Input,{label:"\u989c\u8272",ref:m,name:"lineColor",onChange:A,isHalf:!0})),i.a.createElement("div",{className:"fx"},i.a.createElement(s.a.Switch,{label:"\u5185\u5bb9",ref:p,name:"displayValue",onChange:A,isHalf:!0})),i.a.createElement("div",null,i.a.createElement(s.a.Button,{label:"",text:"\u751f\u6210\u6761\u5f62\u7801",onClick:V})))}},68:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(89);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,o=!1,n=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(u){o=!0,n=u}finally{try{r||null==l.return||l.return()}finally{if(o)throw n}}return a}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);